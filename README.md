# Chaos Organizer widget - Backend

Информация о хранящихся файлах на сервере хранится в файле ```/db/items-data-db.js```
В свойстве ```items``` хранятся объекты типа ```item```: 
```
{
        content: url, 
        type: 'audio'/'video'/'text'/'image', 
        id: id, 
        originalName: имя файла на сервере, (только медиа файлы)
        fileName: оригинальное имя файла (только медиа файлы) 
}
```
Запросы 
## Описание маршрутизации на сервере:
<details>
<summary>Роуты</summary>

1. **GET**-запрос на ```/getAllItems```
    - **возвращает** объекты типа ```item```
2. **GET**-запрос на ```/getmedia?id=какой-то id```
    - **возвращает** ссылку на медиафайл и объект типа ```item```
3. **GET**-запрос на ```/search?content=какая-то строка из поискового виджета```
    - **возвращает** соответствующие объекты типа ```item```
4. **GET**-запрос на ```/filter/:type```
    - **возвращает** соответствующие объекты типа ```item```
5. **GET**-запрос на ```/gettext?id=какой-то id```
    - **возвращает** соответствующий текст
6. **GET**-запрос на ```/download/:id```
    - **возвращает** соответствующий объект из ```./public/media``` для загрузки на клиент
7. **POST**-запрос на ```/add/text```
    - **добавляет** объект типа ```item``` в ```items-data-db.js```
8. **POST**-запрос на ```/add/image```
    - **добавляет** объект типа ```item``` в ```items-data-db.js```
9. **POST**-запрос на ```/add/audio```
    - **добавляет** объект типа ```item``` в ```items-data-db.js```
10. **POST**-запрос на ```/add/video```
    - **добавляет** объект типа ```item``` в ```items-data-db.js```
11. **PATCH**-запрос на ```/update/:id```
    - **изменяет** объект типа ```item```, возвращает измененный объект
12. **DELETE**-запрос на ```/delete/:id```
    - **удаляет** объект типа ```item```, а также (ели медиафайл) удаляет файл из ```./public/media```
</details>

Загрузка файлов на сервер (POST-запросы) осуществляется с помощью [middleware Multer](https://github.com/expressjs/multer). Медиафайлы сохраняются на сервере в ```./public/media```. Медиафайл сохраняется на сервере под именем: ```Date.now() + расширение файла```
